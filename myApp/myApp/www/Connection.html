<!DOCTYPE html> 
<html> 
	<head> 
	<title>Klassio RSV</title> 
	<meta id="extViewportMeta" name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0, user-scalable=no">
	<meta name="apple-mobile-web-app-capable" content="yes">
	<meta name="apple-mobile-web-app-status-bar-style" content="black" />	

	<!-- Home screen icon  Mathias Bynens mathiasbynens.be/notes/touch-icons -->
	<!-- For iPhone 4 with high-resolution Retina display: -->
	<link rel="apple-touch-icon-precomposed" sizes="114x114" href="images/icon.png">
	<!-- For first-generation iPad: -->
	<link rel="apple-touch-icon-precomposed" sizes="72x72" href="images/icon.png">
	<!-- For non-Retina iPhone, iPod Touch, and Android 2.1+ devices: -->
	<link rel="apple-touch-icon-precomposed" href="images/icon.png">
	<!-- For nokia devices: -->
	<link rel="shortcut icon" href="images/icon.png">


	<link rel="stylesheet" href="css/reset.css">
	<link rel="stylesheet" href="css/ui-lightness/jquery-ui-1.8.24.custom.css" />
	<link rel="stylesheet" href="css/themes/default/RSVmain.min.css" />
	<link rel="stylesheet" href="css/themes/default/jquery.mobile.structure-1.1.1.min.css" />
	<link rel="stylesheet" href="css/flexslider.css">
	<link rel="stylesheet" href="css/photoswipe.css">
	<link rel="stylesheet" href="css/add2home.css">
	
	
        <link rel="stylesheet/less" href="css/style.blue.css">

	 <!-- fonts -->
	<link href='http://fonts.googleapis.com/css?family=Source+Sans+Pro:200,300,400,600' rel='stylesheet' type='text/css'>
	
	<script type="text/javascript" src="js/jquery.js"></script>
	<script src="js/jquery-ui-1.8.24.custom.min.js"></script>
	
	<script type="text/javascript" src="js/jquery.mobile-1.1.1.min.js"></script>
        <script type="text/javascript" src="js/less-1.3.3.min.js"></script>
        <!--<script type="text/javascript" src="js/jquery-ui-effects.js"></script>-->

	<script src="js/helper.js"></script>
	<script src="js/jquery.flexslider-min.js"></script>
	<script src="js/iphone-style-checkboxes.js"></script>
	<script src="js/klass.min.js"></script>
	<script src="js/code.photoswipe.jquery-3.0.5.min.js"></script>
	<script src="js/add2home.js"></script>
	<script src="http://maps.google.com/maps/api/js?sensor=false"></script>
        
	<script type="text/javascript" src="js/app.js?v=30"></script>
        <script type="text/javascript" charset="utf-8" src="cordova.js"></script>
    <script type="text/javascript" charset="utf-8">

             // Call onDeviceReady when PhoneGap is loaded.
             //
             // At this point, the document has loaded but phonegap-1.0.0.js has not.
             // When PhoneGap is loaded and talking with the native device,
             // it will call the event `deviceready`.
             // 
             document.addEventListener("deviceready", onDeviceReady, false);

             // PhoneGap is loaded and it is now safe to make calls PhoneGap methods
             //
             function onDeviceReady() {
                 // Register the event listener


                
                 document.addEventListener("backbutton", function (e) {
                     e.preventDefault();
                     navigator.app.backHistory();
                 }, true);
             }

             // Handle the back button
             //
             

    </script>
	<script type="text/javascript">


	    function testgiver(user1) {


	        var query1 = window.location.search.substring(1);
	        var vars1 = query1.split("&");

	        window.location.replace("WhattoGive.html?" + vars1[0] + "&" + vars1[1]);

	    }


	    function takercanGive() {
	        var query2 = window.location.search.substring(1);
	        var vars2 = query2.split("&");

	        window.location.replace("WhattoTake.html?" + vars2[0] + "&" + vars2[1]);

	    }


	    var itemsId = {
	        "checkbox-1a": "Grapefruits",
	        "checkbox-2a": "Apples",
	        "checkbox-3a": "Oranges",
	        "checkbox-4a": "Watermelons",
	        "checkbox-5a": "Pears",
	        "checkbox-6a": "Blueberries",
	        "checkbox-7a": "Strawberries",
	        "checkbox-8a": "Pineapples"

	    };
	    var itemsId1 = {

	        "checkbox-11a": "Money",
	        "checkbox-9a": "snow",
	        "checkbox-10a": "Hughs"

	    };



	    var query = window.location.search.substring(1);

	    var vars = query.split("&");

	    function updateconn() {

	        var query = window.location.search.substring(1);

	        var vars = query.split("&");

	        //alert(vars[0]);
	        //alert(vars[1]);

	        //  alert("update"+ 'http://192.168.42.62:3000/updateconnection/'+vars[1]+"&"+vars[0]);
	        $(function () {
	            $.ajax({
	                url: 'http://takegive-12261.onmodulus.net/updateconnection/' + vars[0] + "&" + vars[1], //the URL to your node.js server that has data
	                dataType: 'json',
	                cache: false
	            }).done(function (data) {
	                //"data" will be JSON. Do what you want with it. 


	                if (data.length == 0) {
	                    alert("You are the first");
	                } else {

						alert("notification has been sent!");
	                    window.location.replace("Connectionmain.html");

	                }
	            });
	        });


	    }

	</script>
</head> 

<body>
	
	<div data-dom-cache="false" data-role="page" class="pages" id="home" data-theme="a">
        <!-- /header -->
		<div class="clear"></div>
		<br/>
		  </br>
		<center><h1> Connection </h1></center>
		 <div class="white-content-box">
				
				 <div id="givetake"></div>
				
				<div class="clear"></div>
				<h2 class="font-14"> Takers Need </h2>
				
				<ul id="taker">
					
				
				</ul>
				<h2 class="font-14"> Giver Will give </h2>
					<ul class="nav-list" id="nav-list">
						<li><a></a></li>
					</ul>
			
				<ul class="column-split three-column" >
					<li>
						<a class="button button3" style="width:200px;margin-left:auto;margin-right:auto" onclick="takercanGive()">Taker can provide !</a>
					</li>
				</ul>	
				</br>
				
		</div>
		
		<div class="white-content-box">
		
			<h2 class="font-14"> Taker Will give </h2>
			<ul class="nav-list" id="nav-list1">
						<li><a></a></li>
			</ul>
			<ul class="column-split three-column" >
				<li>
					<a class="button button3" style="width:200px;margin-left:auto;margin-right:auto" onclick="updateconn()">Taker Connects!</a>
					<a class="button button3" style="width:200px;margin-left:auto;margin-right:auto" onclick="updateconn()">Giver Connects!</a>
				
				</li>
			</ul>	
			
			
		</div>
		
			
	    </div>
	    
	<!-- /content -->
    
       </div><!-- /page -->
	
		<script type="text/javascript">

		    var html1 = "<b><h3>" + vars[0] + "(Giver)" + " + " + "" + vars[1] + "(Taker)</h3></b>";
		    var element = document.getElementById("givetake");
		    element.innerHTML = html1;


		    $(function () {
		        $.ajax({
		            url: 'http://takegive-12261.onmodulus.net/takerinfo/' + vars[1], //the URL to your node.js server that has data
		            dataType: 'json',
		            cache: false
		        }).done(function (data) {
		            //"data" will be JSON. Do what you want with it. 

		            if (data.length == 0) {
		                alert("You are the first");
		            } else {
		                var s2 = document.getElementById("taker");

		                var html = '<ul>';
		                var varss = data[0].items.split(",");
		                for (var i = 0; i < varss.length; i++) {
		                    html += "<li> " + itemsId[varss[i]] + "</li>";


		                }
		                html = html + "</ul>";
		                s2.innerHTML = html;


		            }
		        });
		    });

		    /////////////////////////////////

		    $(function () {
		        $.ajax({
		            url: 'http://takegive-12261.onmodulus.net/giverinfo/' + vars[0], //the URL to your node.js server that has data
		            dataType: 'json',
		            cache: false
		        }).done(function (data) {
		            //"data" will be JSON. Do what you want with it. 


		            if (data.length == 0) {
		                alert("You are the first");
		            } else {
		                var s2 = document.getElementById("nav-list");

		                var html = "<li> <a  onclick=" + "testgiver('" + vars[0] + "')>";
		                var varss = data[0].items.split(",");
		                for (var i = 0; i < varss.length; i++) {
		                    html += itemsId[varss[i]] + ",";

		                }
		                html = html + "</a></li>";
		                s2.innerHTML = html;


		            }
		        });
		    });


		    $(function () {
		        $.ajax({
		            url: 'http://takegive-12261.onmodulus.net/takegive/' + vars[1], //the URL to your node.js server that has data
		            dataType: 'json',
		            cache: false
		        }).done(function (data) {

		            if (data.length == 0) {
		               // alert("You are the first");
		            } else {

		                var s4 = document.getElementById("nav-list1");
		                var html = '<li><a>';
		                var vars = data[0].give_item.split(",");
		                for (var i = 0; i < vars.length; i++) {

		                    //document.getElementById(vars[i]).checked = true ;

		                    html += itemsId1[vars[i]] + ",";
		                }
		                html = html + "</a></li>";
		                s4.innerHTML = html;



		            }

		        });

		    });

		</script>
	
		<div class="white-content-box">
		</br>
		</div>
	</body>
</html>